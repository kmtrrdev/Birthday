<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Happy Birthday, Habuba! ðŸŽ‰</title>
<style>
  *{box-sizing:border-box}
  :root{
    --pink:#ff69b4; --red:#e53935; --fg:#fff;
    --bg1:#2b1b47; --bg2:#1a0f2e;
    --paper:#fffdf6;
  }
  body{
    margin:0; font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,"Poppins",sans-serif;
    background: radial-gradient(1200px 600px at 50% 0%, var(--bg1) 0%, var(--bg2) 60%);
    color:var(--fg); min-height:100vh; display:flex; flex-direction:column;
    align-items:center; justify-content:center; overflow:hidden; text-align:center;
    cursor: none; transition: filter 0.5s ease;
  }
  
  /* Blur effect - excludes the big heart */
  body.blurred > *:not(.big-heart-overlay) {
    filter: blur(8px);
  }
  
  /* Custom Cursor */
  .cursor {
    position: fixed;
    width: 20px;
    height: 20px;
    background: radial-gradient(circle, #ff69b4, #ff1493);
    border-radius: 50%;
    pointer-events: none;
    z-index: 9999;
    transition: transform 0.1s ease;
    box-shadow: 0 0 15px rgba(255, 105, 180, 0.6);
  }
  .cursor.click {
    transform: scale(1.5);
  }

  h1{font-size:2rem; margin:18px 12px 8px; transition: all 0.3s ease;}
  h1:hover { transform: scale(1.05); text-shadow: 0 0 20px rgba(255, 105, 180, 0.8); }
  
  .buttons{display:flex;gap:14px;flex-wrap:wrap;justify-content:center}
  button{padding:10px 20px;font-size:1.05rem;border:none;border-radius:10px;cursor:pointer;transition:.25s; position: relative; overflow: hidden;}
  button::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    transition: width 0.3s ease, height 0.3s ease;
    transform: translate(-50%, -50%);
  }
  button:hover::before {
    width: 300px;
    height: 300px;
  }
  
  #yesBtn{background:var(--pink);color:#fff} #yesBtn:hover{transform:scale(1.06)}
  #noBtn{background:var(--red);color:#fff}
  .message{margin-top:10px;font-size:1.15rem;white-space:pre-line; animation: fadeIn 1s ease;}

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Heart rain */
  .heart-rain{
    position:fixed; z-index:100; pointer-events:none; width:18px;height:18px;transform:rotate(45deg);
    background:red; animation:fallHeart linear forwards; border-radius:2px; filter:drop-shadow(0 0 6px rgba(255,0,0,.6));
  }
  .heart-rain::before,.heart-rain::after{content:'';position:absolute;width:18px;height:18px;background:inherit;border-radius:50%}
  .heart-rain::before{top:-9px;left:0}.heart-rain::after{left:-9px;top:0}
  @keyframes fallHeart{0%{transform:translateY(-10vh) rotate(45deg) scale(0);opacity:0}5%{opacity:.95; transform:translateY(-5vh) rotate(45deg) scale(1)}100%{transform:translateY(110vh) rotate(405deg) scale(0.5);opacity:0}}

  /* Heart container */
  .heart-container {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 200;
    display: none;
    width: 200px;
    height: 250px;
  }

  /* Main heart */
  .heart-shell {
    position: relative;
    width: 200px;
    height: 180px;
    cursor: pointer;
    z-index: 2;
    transition: all 0.3s ease;
    animation: heartPulse 2s ease-in-out infinite;
  }

  .heart-shell:hover {
    transform: scale(1.05);
    filter: drop-shadow(0 10px 25px rgba(255, 105, 180, 0.6));
  }

  .heart-shell::before, .heart-shell::after {
    content: "";
    position: absolute;
    width: 100px;
    height: 160px;
    background: linear-gradient(145deg, #ff69b4, #ff1493);
    border-radius: 100px 100px 0 0;
    top: 0;
    box-shadow: inset 0 0 20px rgba(255, 255, 255, 0.3), 0 5px 15px rgba(0, 0, 0, 0.3);
  }

  .heart-shell::before {
    left: 100px;
    transform: rotate(-45deg);
    transform-origin: 0 100%;
  }

  .heart-shell::after {
    left: 0;
    transform: rotate(45deg);
    transform-origin: 100% 100%;
  }

  @keyframes heartPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.03); }
  }

  /* Note */
  .note {
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%) translateY(120%);
    width: 160px;
    height: 200px;
    background: var(--paper);
    border-radius: 10px;
    color: #333;
    padding: 15px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
    transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    transform-origin: bottom center;
    z-index: 1;
  }

  .note.open {
    transform: translateX(-50%) translateY(-15%);
  }

  .note-content {
    font-size: 14px;
    text-align: center;
    line-height: 1.4;
  }

  .note-content h3 {
    margin: 0 0 10px 0;
    font-size: 16px;
    color: #d63384;
  }

  .note-content p {
    margin: 0;
  }

  /* Paper tip indicator */
  .paper-tip-indicator {
    position: absolute;
    top: -30px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 12px;
    color: rgba(255, 255, 255, 0.7);
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
  }

  .heart-shell:hover .paper-tip-indicator {
    opacity: 1;
  }

  /* Big heart overlay */
  .big-heart-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(15px);
    z-index: 10000;
    display: none;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .big-heart-overlay.active {
    display: flex;
    opacity: 1;
  }

  /* Big heart */
  .big-heart-shell {
    position: relative;
    width: min(400px, 80vw);
    height: min(360px, 72vw);
    cursor: default;
    transform: scale(0.3) rotate(-10deg);
    transition: transform 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    animation: bigHeartFloat 4s ease-in-out infinite;
  }

  .big-heart-overlay.active .big-heart-shell {
    transform: scale(1) rotate(0deg);
  }

  .big-heart-shell::before, .big-heart-shell::after {
    content: "";
    position: absolute;
    width: 200px;
    height: 320px;
    background: linear-gradient(145deg, #ff1493, #ff69b4, #ff1493);
    border-radius: 200px 200px 0 0;
    top: 0;
    box-shadow: 
      inset 0 0 40px rgba(255, 255, 255, 0.4),
      0 20px 40px rgba(255, 20, 147, 0.6),
      0 0 80px rgba(255, 105, 180, 0.4);
    filter: brightness(1.1);
  }

  .big-heart-shell::before {
    left: 200px;
    transform: rotate(-45deg);
    transform-origin: 0 100%;
  }

  .big-heart-shell::after {
    left: 0;
    transform: rotate(45deg);
    transform-origin: 100% 100%;
  }

  @keyframes bigHeartFloat {
    0%, 100% { transform: translateY(0px) rotate(0deg) scale(1); }
    25% { transform: translateY(-10px) rotate(1deg) scale(1.02); }
    50% { transform: translateY(0px) rotate(0deg) scale(1); }
    75% { transform: translateY(-5px) rotate(-1deg) scale(1.01); }
  }

  /* Big heart content - Fixed positioning to keep text inside */
  .big-heart-content {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    color: white;
    padding: 15px 10px;
    width: 70%;
    max-width: 280px;
    z-index: 10;
    overflow: hidden;
    box-sizing: border-box;
  }

  .big-heart-title {
    font-size: clamp(1.2rem, 4vw, 1.6rem);
    margin-bottom: 12px;
    text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
    animation: titleShine 3s ease-in-out infinite;
    line-height: 1.1;
  }

  .big-heart-message {
    font-size: clamp(0.8rem, 2.5vw, 0.95rem);
    line-height: 1.3;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
    overflow-wrap: break-word;
    word-wrap: break-word;
    hyphens: auto;
  }

  @keyframes titleShine {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.9; transform: scale(1.02); }
  }

  .close-heart {
    position: absolute;
    top: 15px;
    right: 25px;
    background: rgba(255, 255, 255, 0.2);
    border: 2px solid rgba(255, 255, 255, 0.5);
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 18px;
    color: white;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
    z-index: 15;
  }

  .close-heart:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: scale(1.1) rotate(90deg);
  }

  /* Corner sunflowers */
  .corners{position:fixed; inset:0; pointer-events:none; z-index:10}
  .corner-flower{position:absolute; font-size:clamp(40px,8vw,80px); opacity:.5; filter:drop-shadow(0 0 8px rgba(255,255,0,.5)); transition: all 0.3s ease;}
  .corner-flower:hover { transform: scale(1.2) rotate(180deg)!important; opacity: 0.8; }
  .tl{top:8px;left:12px;transform:rotate(-15deg); animation: flowerSway1 6s ease-in-out infinite;} 
  .tr{top:8px;right:12px;transform:rotate(15deg); animation: flowerSway2 7s ease-in-out infinite;}
  .bl{bottom:8px;left:10px;transform:rotate(12deg); animation: flowerSway3 5s ease-in-out infinite;} 
  .br{bottom:8px;right:10px;transform:rotate(-10deg); animation: flowerSway4 8s ease-in-out infinite;}

  @keyframes flowerSway1 {
    0%, 100% { transform: rotate(-15deg) scale(1); }
    25% { transform: rotate(-10deg) scale(1.1); }
    50% { transform: rotate(-20deg) scale(1); }
    75% { transform: rotate(-5deg) scale(1.05); }
  }
  @keyframes flowerSway2 {
    0%, 100% { transform: rotate(15deg) scale(1); }
    33% { transform: rotate(20deg) scale(1.05); }
    66% { transform: rotate(10deg) scale(1.1); }
  }
  @keyframes flowerSway3 {
    0%, 100% { transform: rotate(12deg) scale(1); }
    40% { transform: rotate(17deg) scale(1.08); }
    80% { transform: rotate(7deg) scale(1.02); }
  }
  @keyframes flowerSway4 {
    0%, 100% { transform: rotate(-10deg) scale(1); }
    20% { transform: rotate(-5deg) scale(1.06); }
    60% { transform: rotate(-15deg) scale(1.03); }
  }

  /* Magic particles */
  .magic-particle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: radial-gradient(circle, #ff69b4, transparent);
    border-radius: 50%;
    pointer-events: none;
    animation: magicFloat 3s ease-out forwards;
  }

  @keyframes magicFloat {
    0% { transform: translateY(0) scale(1); opacity: 1; }
    100% { transform: translateY(-100px) scale(0); opacity: 0; }
  }

  /* Confetti Canvas */
  #confettiCanvas {
    position: fixed;
    top: 0;
    left: 0;
    pointer-events: none;
    z-index: 9999;
  }

  /* Glitch Effect */
  @keyframes glitch {
    0% { transform: translateX(0); }
    20% { transform: translateX(-2px) rotateX(1deg); }
    40% { transform: translateX(2px) rotateY(1deg); }
    60% { transform: translateX(-1px) rotateX(-1deg); }
    80% { transform: translateX(1px) rotateY(-1deg); }
    100% { transform: translateX(0); }
  }

  @media (max-width:520px){
    h1{font-size:1.5rem} button{font-size:.95rem; padding:9px 16px} .message{font-size:1rem}
    .heart-container { width: 160px; height: 200px; bottom: 20px; }
    .heart-shell { width: 160px; height: 144px; }
    .heart-shell::before, .heart-shell::after { width: 80px; height: 128px; }
    .heart-shell::before { left: 80px; }
    .note { width: 140px; height: 180px; padding: 12px; }
    .big-heart-content { padding: 12px 8px; width: 75%; max-width: 250px; }
  }
</style>
</head>
<body>
  <div class="cursor" id="cursor"></div>
  <canvas id="confettiCanvas"></canvas>

  <h1 id="question">Habuba, will you be my birthday girl foreverØŸ ðŸŽ‚ðŸ’–</h1>

  <div class="buttons">
    <button id="yesBtn">Yes ðŸŽ‰</button>
    <button id="noBtn">No ðŸ˜¢</button>
  </div>

  <div class="message" id="message"></div>

  <!-- Bottom heart -->
  <div class="heart-container" id="heartContainer">
    <div class="heart-shell" id="heartShell">
      <div class="paper-tip-indicator">Click to open! ðŸ’–</div>
    </div>
    <div class="note" id="note">
      <div class="note-content">
        <h3>ðŸ’Œ Happy Birthday, Habuba!</h3>
        <p>May your day be filled with love, joy, and endless happiness! ðŸŽ‰</p>
        <p><small><em>You make every day magical! âœ¨</em></small></p>
      </div>
    </div>
  </div>

  <!-- Big heart overlay -->
  <div class="big-heart-overlay" id="bigHeartOverlay">
    <div class="big-heart-shell">
      <div class="close-heart" id="closeHeart">Ã—</div>
      <div class="big-heart-content">
        <div class="big-heart-title">ðŸ’– Happy Birthday! ðŸ’–</div>
        <div class="big-heart-message">
          My dearest Habuba,<br>
          On this special day, I wish you all the love, joy, and magical moments your heart can hold.<br>
          <br>
          You make every day brighter! âœ¨<br>
          <strong>Forever yours ðŸ’•</strong>
        </div>
      </div>
    </div>
  </div>

  <!-- Corner sunflowers -->
  <div class="corners" aria-hidden="true">
    <div class="corner-flower tl">ðŸŒ»</div>
    <div class="corner-flower tr">ðŸŒ»</div>
    <div class="corner-flower bl">ðŸŒ»</div>
    <div class="corner-flower br">ðŸŒ»</div>
  </div>

<script>
  const yesBtn = document.getElementById('yesBtn');
  const noBtn = document.getElementById('noBtn');
  const question = document.getElementById('question');
  const message = document.getElementById('message');
  const heartContainer = document.getElementById('heartContainer');
  const heartShell = document.getElementById('heartShell');
  const note = document.getElementById('note');
  const bigHeartOverlay = document.getElementById('bigHeartOverlay');
  const closeHeart = document.getElementById('closeHeart');
  const cursor = document.getElementById('cursor');

  let noClicks = 0;
  let noteOpened = false;

  // Confetti setup
  const confettiCanvas = document.getElementById("confettiCanvas");
  const ctx = confettiCanvas.getContext("2d");
  let confettiPieces = [];

  function resizeCanvas() {
    confettiCanvas.width = window.innerWidth;
    confettiCanvas.height = window.innerHeight;
  }
  window.addEventListener("resize", resizeCanvas);
  resizeCanvas();

  // Custom cursor tracking
  document.addEventListener('mousemove', (e) => {
    cursor.style.left = e.clientX - 10 + 'px';
    cursor.style.top = e.clientY - 10 + 'px';
  });

  document.addEventListener('mousedown', () => {
    cursor.classList.add('click');
  });

  document.addEventListener('mouseup', () => {
    cursor.classList.remove('click');
  });

  // Interactive background - click to create magic particles
  document.addEventListener('click', (e) => {
    if (!e.target.closest('button') && !e.target.closest('.heart-shell') && 
        !e.target.closest('.big-heart-overlay')) {
      createMagicParticles(e.clientX, e.clientY);
    }
  });

  function createMagicParticles(x, y) {
    for (let i = 0; i < 8; i++) {
      const particle = document.createElement('div');
      particle.className = 'magic-particle';
      particle.style.left = (x - 2) + 'px';
      particle.style.top = (y - 2) + 'px';
      particle.style.animationDelay = (i * 100) + 'ms';
      
      document.body.appendChild(particle);
      
      setTimeout(() => {
        particle.remove();
      }, 3000);
    }
  }

  // Button interactions
  yesBtn.addEventListener('click', () => {
    yesBtn.remove(); 
    noBtn.remove(); 
    question.textContent = "";
    message.textContent = "ðŸŽ‰ðŸŽ‚ Happy Birthday, Habuba! ðŸŽ‚ðŸŽ‰\nâœ¨ Look at the bottom - click on the heart! âœ¨";
    heartContainer.style.display = 'block';
    startHeartRain();
  });

  noBtn.addEventListener('click', () => {
    noClicks++;
    
    createMagicParticles(
      noBtn.getBoundingClientRect().left + noBtn.offsetWidth/2,
      noBtn.getBoundingClientRect().top + noBtn.offsetHeight/2
    );
    
    if (noClicks === 1) {
      question.textContent = "Please...? ðŸ¥¹ It's your birthday!";
      question.style.color = '#ffeb3b';
    } else if (noClicks === 2) {
      question.textContent = "Come on, birthday girl! ðŸ¥º";
      question.style.color = '#ff9800';
      moveButtonRandomly(noBtn);
    } else if (noClicks === 3) {
      question.textContent = "Pretty please with a cherry on top? ðŸ’";
      question.style.color = '#ff5722';
      moveButtonRandomly(noBtn);
      document.querySelectorAll('.corner-flower').forEach(flower => {
        flower.style.animationDuration = '1s';
      });
    } else if (noClicks === 4) {
      document.body.style.animation = 'glitch 0.3s infinite';
      question.textContent = "System Error... Birthday acceptance is mandatory ðŸŽ‚ðŸ˜‚";
      question.style.color = '#f44336';
      startHeartRain();
    } else {
      noBtn.remove(); 
      question.textContent = "Only one choice remains ðŸ˜ˆðŸŽ‰";
      question.style.color = '#e91e63';
      yesBtn.style.animation = 'heartbeat 1s infinite';
    }
  });

  function moveButtonRandomly(button){
    const w = button.offsetWidth, h = button.offsetHeight;
    const x = Math.random() * (window.innerWidth - w - 20);
    const y = Math.random() * (window.innerHeight - h - 20);
    button.style.position='absolute'; 
    button.style.left=`${x}px`; 
    button.style.top=`${y}px`;
    button.style.transform = `rotate(${Math.random() * 20 - 10}deg)`;
  }

  // Heart rain
  function startHeartRain(){
    const spawn=()=>{
      const heart=document.createElement('div'); 
      heart.className='heart-rain';
      const size=12+Math.random()*25; 
      heart.style.width=size+'px'; 
      heart.style.height=size+'px';
      heart.style.left=Math.random()*100+'vw'; 
      heart.style.animationDuration=2+Math.random()*4+'s';
      
      const colors = ['#ff7eb6', '#ff3b3b', '#ff69b4', '#ff1493', '#ffd6e9'];
      heart.style.background=colors[Math.floor(Math.random() * colors.length)]; 
      document.body.appendChild(heart);
      setTimeout(()=>heart.remove(),8000);
    };
    
    for(let i=0;i<50;i++) setTimeout(spawn,i*40); 
    setInterval(spawn, 100);
  }

  // Heart click functionality
  heartShell.addEventListener('click', () => {
    noteOpened = !noteOpened;
    note.classList.toggle('open', noteOpened);
    
    if (noteOpened) {
      burstConfetti(heartShell);
      setTimeout(() => {
        openBigHeart();
      }, 1000);
    }
  });

  // Big heart functionality
  function openBigHeart() {
    document.body.classList.add('blurred');
    bigHeartOverlay.classList.add('active');
    
    setTimeout(() => {
      createMagicParticles(window.innerWidth / 2, window.innerHeight / 2);
    }, 500);
  }

  closeHeart.addEventListener('click', closeBigHeart);
  bigHeartOverlay.addEventListener('click', (e) => {
    if (e.target === bigHeartOverlay) {
      closeBigHeart();
    }
  });

  function closeBigHeart() {
    document.body.classList.remove('blurred');
    bigHeartOverlay.classList.remove('active');
  }

  // Enhanced confetti system
  function burstConfetti(elem) {
    const rect = elem.getBoundingClientRect();
    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;
    
    for (let i = 0; i < 120; i++) {
      confettiPieces.push({
        x: centerX,
        y: centerY,
        r: Math.random() * 8 + 3,
        c: `hsl(${Math.random() * 360},100%,50%)`,
        vx: (Math.random() - 0.5) * 8,
        vy: Math.random() * -8 - 4,
        a: 1,
        gravity: 0.1
      });
    }
  }

  function drawConfetti() {
    ctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
    confettiPieces.forEach((p, i) => {
      p.x += p.vx;
      p.y += p.vy;
      p.vy += p.gravity;
      p.a -= 0.008;
      
      ctx.globalAlpha = p.a;
      ctx.fillStyle = p.c;
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
      ctx.fill();
      
      if (p.a <= 0 || p.y > confettiCanvas.height) {
        confettiPieces.splice(i, 1);
      }
    });
    requestAnimationFrame(drawConfetti);
  }
  drawConfetti();

  // Keyboard controls
  document.addEventListener('keydown',(e)=>{
    if((e.key==='Enter'||e.key===' ') && document.body.contains(yesBtn)){ 
      yesBtn.click(); 
    } else if (e.key === 'Escape' && bigHeartOverlay.classList.contains('active')) {
      closeBigHeart();
    } else if ((e.key === 'h' || e.key === 'H') && heartContainer.style.display !== 'none') {
      heartShell.click();
    }
  });

  // Add subtle particles on page load
  setTimeout(() => {
    for (let i = 0; i < 15; i++) {
      setTimeout(() => {
        createMagicParticles(
          Math.random() * window.innerWidth,
          Math.random() * window.innerHeight
        );
      }, i * 300);
    }
  }, 1000);

</script>
</body>
</html>