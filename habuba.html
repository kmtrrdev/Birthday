<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Happy Birthday, Habuba! 🎉</title>
<style>
  *{box-sizing:border-box}
  :root{
    --pink:#ff69b4; --red:#e53935; --fg:#fff;
    --bg1:#2b1b47; --bg2:#1a0f2e;
    --paper:#fffdf6;
  }
  body{
    margin:0; font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,"Poppins",sans-serif;
    background: radial-gradient(1200px 600px at 50% 0%, var(--bg1) 0%, var(--bg2) 60%);
    color:var(--fg); min-height:100vh; display:flex; flex-direction:column;
    align-items:center; justify-content:center; overflow:hidden; text-align:center;
    transition: filter 0.5s ease;
  }

  /* Blur effect - excludes the big heart */
  body.blurred > *:not(.big-heart-overlay) { filter: blur(8px); }

  h1{font-size:2rem; margin:18px 12px 8px; transition: all 0.3s ease;}
  h1:hover { transform: scale(1.05); text-shadow: 0 0 20px rgba(255, 105, 180, 0.8); }
  
  .buttons{display:flex;gap:14px;flex-wrap:wrap;justify-content:center}
  button{padding:10px 20px;font-size:1.05rem;border:none;border-radius:10px;cursor:pointer;transition:.25s; position: relative; overflow: hidden;}
  button::before{
    content:''; position:absolute; top:50%; left:50%; width:0; height:0;
    background:rgba(255,255,255,.3); border-radius:50%;
    transition:width .3s ease, height .3s ease; transform:translate(-50%,-50%);
  }
  button:hover::before{width:300px;height:300px}
  #yesBtn{background:var(--pink);color:#fff} #yesBtn:hover{transform:scale(1.06)}
  #noBtn{background:var(--red);color:#fff}
  .message{margin-top:10px;font-size:1.15rem;white-space:pre-line; animation: fadeIn 1s ease;}
  @keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}

  /* Heart rain */
  .heart-rain{
    position:fixed; z-index:100; pointer-events:none; width:18px;height:18px;transform:rotate(45deg);
    background:red; animation:fallHeart linear forwards; border-radius:2px; filter:drop-shadow(0 0 6px rgba(255,0,0,.6));
  }
  .heart-rain::before,.heart-rain::after{content:'';position:absolute;width:18px;height:18px;background:inherit;border-radius:50%}
  .heart-rain::before{top:-9px;left:0}.heart-rain::after{left:-9px;top:0}
  @keyframes fallHeart{0%{transform:translateY(-10vh) rotate(45deg) scale(0);opacity:0}5%{opacity:.95; transform:translateY(-5vh) rotate(45deg) scale(1)}100%{transform:translateY(110vh) rotate(405deg) scale(.5);opacity:0}}

  /* Bottom heart */
  .heart-container{
    position:fixed; bottom:80px; left:50%; transform:translateX(-50%);
    z-index:200; display:none; width:280px; height:320px;
  }
  .heart-shell{position:relative; width:280px; height:252px; cursor:pointer; z-index:2; transition:all .3s ease; animation:heartPulse 2s ease-in-out infinite}
  .heart-shell:hover{transform:scale(1.05); filter:drop-shadow(0 10px 25px rgba(255,105,180,.6))}
  .heart-shell::before,.heart-shell::after{
    content:""; position:absolute; width:140px; height:224px;
    background:linear-gradient(145deg,#ff69b4,#ff1493); border-radius:140px 140px 0 0; top:0;
    box-shadow:inset 0 0 20px rgba(255,255,255,.3), 0 5px 15px rgba(0,0,0,.3);
  }
  .heart-shell::before{left:140px; transform:rotate(-45deg); transform-origin:0 100%}
  .heart-shell::after{left:0; transform:rotate(45deg); transform-origin:100% 100%}
  @keyframes heartPulse{0%,100%{transform:scale(1)}50%{transform:scale(1.03)}}

  .note{
    position:absolute; bottom:0; left:50%; transform:translateX(-50%) translateY(120%);
    width:240px; height:280px; background:var(--paper); border-radius:10px; color:#333; padding:20px;
    box-shadow:0 8px 20px rgba(0,0,0,.4); transition:transform .8s cubic-bezier(.4,0,.2,1); transform-origin:bottom center; z-index:1;
  }
  .note.open{ transform:translateX(-50%) translateY(-20%) }
  .note-content{font-size:16px; text-align:center; line-height:1.4}
  .note-content h3{margin:0 0 15px 0; font-size:20px; color:#d63384}
  .note-content p{margin:8px 0}
  .paper-tip-indicator{position:absolute; top:-40px; left:50%; transform:translateX(-50%); font-size:14px; color:rgba(255,255,255,.7); opacity:1; transition:opacity .3s ease; pointer-events:none}

  /* Overlay */
  .big-heart-overlay{
    position:fixed; inset:0; background:rgba(0,0,0,.5); backdrop-filter:blur(15px);
    z-index:10000; display:none; align-items:center; justify-content:center; opacity:0;
    transition:all .6s cubic-bezier(.4,0,.2,1); padding:20px; box-sizing:border-box;
  }
  .big-heart-overlay.active{display:flex; opacity:1}

  /* BIG HEART — centered + no rectangle shadow */
  .big-heart-shell{
    position:absolute; left:50%; top:50%;
    transform:translate(-50%,-50%) scale(.3) rotate(-10deg);
    width:min(92vw, 520px);
    aspect-ratio: 1 / 0.9;
    max-width:520px;
    cursor:default;
    transition:transform .8s cubic-bezier(.68,-.55,.265,1.55);
    animation:bigHeartFloat 4s ease-in-out infinite;
    contain:layout paint;
  }
  .big-heart-overlay.active .big-heart-shell{
    transform:translate(-50%,-50%) scale(1) rotate(0deg);
  }

  .big-heart-shell::before,
  .big-heart-shell::after{
    content:""; position:absolute; top:0;
    width:50%; height:90%;
    background:linear-gradient(145deg,#ff1493,#ff69b4,#ff1493);
    border-radius:50% 50% 0 0 / 55% 55% 0 0;
    /* Remove any rectangle/box shadow */
    box-shadow:none;          /* <— removed */
    filter:brightness(1.06);
  }
  .big-heart-shell::before{ left:50%; transform-origin:0 100%; transform:rotate(-45deg) }
  .big-heart-shell::after{ left:0;   transform-origin:100% 100%; transform:rotate(45deg) }

  @keyframes bigHeartFloat{
    0%,100%{ transform:translate(-50%,-50%) scale(1) rotate(0) }
    25%{    transform:translate(calc(-50%), calc(-50% - 10px)) scale(1.02) rotate(1deg) }
    50%{    transform:translate(-50%,-50%) scale(1) rotate(0) }
    75%{    transform:translate(calc(-50%), calc(-50% - 5px)) scale(1.01) rotate(-1deg) }
  }

  /* TEXT INSIDE BIG HEART — formatted */
  .big-heart-content{
    position:absolute; inset:0;
    display:flex; align-items:center; justify-content:center;
    flex-direction:column;
    text-align:center; color:#fff;
    padding:24px 18px; width:100%; height:100%;
    z-index:10; box-sizing:border-box;
  }
  .big-heart-title{
    font-size:clamp(22px, 5.8vw, 30px);
    font-weight:800;
    margin:0 0 10px 0;
    letter-spacing:.3px;
    text-shadow:0 0 8px rgba(255,255,255,.55);
    line-height:1.15;
  }
  .big-heart-message{
    font-size:clamp(14px, 4.2vw, 18px);
    line-height:1.45;
    max-width:84%;
    margin:0 auto;
    text-shadow:0 1px 6px rgba(0,0,0,.45);
    word-break:break-word;
  }

  .close-heart{
    position:absolute; top:15px; right:20px; background:rgba(255,255,255,.22);
    border:2px solid rgba(255,255,255,.55); border-radius:50%; width:40px; height:40px;
    display:flex; align-items:center; justify-content:center; cursor:pointer; font-size:18px; color:white;
    transition:all .3s ease; backdrop-filter:blur(10px); z-index:15;
  }
  .close-heart:hover{ background:rgba(255,255,255,.32); transform:scale(1.1) rotate(90deg) }

  /* Corner sunflowers */
  .corners{position:fixed; inset:0; pointer-events:none; z-index:10}
  .corner-flower{position:absolute; font-size:clamp(50px,10vw,100px); opacity:.5; filter:drop-shadow(0 0 8px rgba(255,255,0,.5)); transition:all .3s ease;}
  .corner-flower:hover{ transform:scale(1.2) rotate(180deg)!important; opacity:.8 }
  .tl{top:20px;left:20px;transform:rotate(-15deg); animation:flowerSway1 6s ease-in-out infinite} 
  .tr{top:20px;right:20px;transform:rotate(15deg); animation:flowerSway2 7s ease-in-out infinite}
  .bl{bottom:20px;left:20px;transform:rotate(12deg); animation:flowerSway3 5s ease-in-out infinite} 
  .br{bottom:20px;right:20px;transform:rotate(-10deg); animation:flowerSway4 8s ease-in-out infinite}
  @keyframes flowerSway1{0%,100%{transform:rotate(-15deg) scale(1)}25%{transform:rotate(-10deg) scale(1.1)}50%{transform:rotate(-20deg) scale(1)}75%{transform:rotate(-5deg) scale(1.05)}}
  @keyframes flowerSway2{0%,100%{transform:rotate(15deg) scale(1)}33%{transform:rotate(20deg) scale(1.05)}66%{transform:rotate(10deg) scale(1.1)}}
  @keyframes flowerSway3{0%,100%{transform:rotate(12deg) scale(1)}40%{transform:rotate(17deg) scale(1.08)}80%{transform:rotate(7deg) scale(1.02)}}
  @keyframes flowerSway4{0%,100%{transform:rotate(-10deg) scale(1)}20%{transform:rotate(-5deg) scale(1.06)}60%{transform:rotate(-15deg) scale(1.03)}}

  /* Magic particles */
  .magic-particle{position:absolute; width:4px; height:4px; background:radial-gradient(circle,#ff69b4,transparent); border-radius:50%; pointer-events:none; animation:magicFloat 3s ease-out forwards}
  @keyframes magicFloat{0%{transform:translateY(0) scale(1); opacity:1}100%{transform:translateY(-100px) scale(0); opacity:0}}

  /* Confetti Canvas */
  #confettiCanvas{position:fixed; top:0; left:0; pointer-events:none; z-index:9999}

  /* Glitch */
  @keyframes glitch{0%{transform:translateX(0)}20%{transform:translateX(-2px) rotateX(1deg)}40%{transform:translateX(2px) rotateY(1deg)}60%{transform:translateX(-1px) rotateX(-1deg)}80%{transform:translateX(1px) rotateY(-1deg)}100%{transform:translateX(0)}}

  /* Mobile tweaks */
  @media (max-width:1200px){
    h1{font-size:1.8rem; margin:20px 15px 10px}
    button{font-size:1.1rem; padding:12px 24px}
    .message{font-size:1.2rem; margin-top:15px}
    .heart-container{width:320px; height:360px; bottom:100px}
    .heart-shell{width:320px; height:288px}
    .heart-shell::before,.heart-shell::after{width:160px; height:256px; border-radius:160px 160px 0 0}
    .heart-shell::before{left:160px}
    .note{width:280px; height:320px; padding:25px}
    .note-content{font-size:18px}
    .note-content h3{font-size:22px; margin-bottom:20px}
    .paper-tip-indicator{font-size:16px; top:-45px}
    .big-heart-title{font-size:clamp(22px,6vw,34px)}
    .big-heart-message{font-size:clamp(15px,4.6vw,20px)}
  }
</style>
</head>
<body>
  <canvas id="confettiCanvas"></canvas>

  <h1 id="question">Habuba, will you be my birthday girl forever؟ 🎂💖</h1>

  <div class="buttons">
    <button id="yesBtn">Yes 🎉</button>
    <button id="noBtn">No 😢</button>
  </div>

  <div class="message" id="message"></div>

  <!-- Bottom heart -->
  <div class="heart-container" id="heartContainer">
    <div class="heart-shell" id="heartShell">
      <div class="paper-tip-indicator">Click to open! 💖</div>
    </div>
    <div class="note" id="note">
      <div class="note-content">
        <h3>💌 Happy Birthday, Habuba!</h3>
        <p>May your day be filled with love, joy, and endless happiness! 🎉</p>
        <p><small><em>You make every day magical! ✨</em></small></p>
      </div>
    </div>
  </div>

  <!-- Big heart overlay -->
  <div class="big-heart-overlay" id="bigHeartOverlay">
    <div class="big-heart-shell">
      <div class="close-heart" id="closeHeart">×</div>
      <div class="big-heart-content">
        <div class="big-heart-title">💖 Happy Birthday! 💖</div>
        <div class="big-heart-message">
          My dearest Habuba,<br>
          On this special day, I wish you all the love, joy, and magical moments your heart can hold.<br><br>
          You make every day brighter! ✨<br>
          <strong>Forever yours 💕</strong>
        </div>
      </div>
    </div>
  </div>

  <!-- Corner sunflowers -->
  <div class="corners" aria-hidden="true">
    <div class="corner-flower tl">🌻</div>
    <div class="corner-flower tr">🌻</div>
    <div class="corner-flower bl">🌻</div>
    <div class="corner-flower br">🌻</div>
  </div>

<script>
  const yesBtn = document.getElementById('yesBtn');
  const noBtn = document.getElementById('noBtn');
  const question = document.getElementById('question');
  const message = document.getElementById('message');
  const heartContainer = document.getElementById('heartContainer');
  const heartShell = document.getElementById('heartShell');
  const note = document.getElementById('note');
  const bigHeartOverlay = document.getElementById('bigHeartOverlay');
  const closeHeart = document.getElementById('closeHeart');

  let noClicks = 0;
  let noteOpened = false;

  // Confetti setup
  const confettiCanvas = document.getElementById("confettiCanvas");
  const ctx = confettiCanvas.getContext("2d");
  let confettiPieces = [];

  function resizeCanvas() {
    confettiCanvas.width = window.innerWidth;
    confettiCanvas.height = window.innerHeight;
  }
  window.addEventListener("resize", resizeCanvas);
  resizeCanvas();

  // Interactive background - click to create magic particles
  document.addEventListener('click', (e) => {
    if (!e.target.closest('button') && !e.target.closest('.heart-shell') && 
        !e.target.closest('.big-heart-overlay')) {
      createMagicParticles(e.clientX, e.clientY);
    }
  });

  function createMagicParticles(x, y) {
    for (let i = 0; i < 8; i++) {
      const particle = document.createElement('div');
      particle.className = 'magic-particle';
      particle.style.left = (x - 2) + 'px';
      particle.style.top = (y - 2) + 'px';
      particle.style.animationDelay = (i * 100) + 'ms';
      document.body.appendChild(particle);
      setTimeout(() => particle.remove(), 3000);
    }
  }

  // Button interactions
  yesBtn.addEventListener('click', () => {
    yesBtn.remove(); 
    noBtn.remove(); 
    question.textContent = "";
    message.textContent = "         ";
    heartContainer.style.display = 'block';
    startHeartRain();
  });

  noBtn.addEventListener('click', () => {
    noClicks++;
    createMagicParticles(
      noBtn.getBoundingClientRect().left + noBtn.offsetWidth/2,
      noBtn.getBoundingClientRect().top + noBtn.offsetHeight/2
    );
    if (noClicks === 1) {
      question.textContent = "Please...? 🥹 It's your birthday!";
      question.style.color = '#ffeb3b';
    } else if (noClicks === 2) {
      question.textContent = "Come on, birthday girl! 🥺";
      question.style.color = '#ff9800';
      moveButtonRandomly(noBtn);
    } else if (noClicks === 3) {
      question.textContent = "Pretty please with a cherry on top? 🍒";
      question.style.color = '#ff5722';
      moveButtonRandomly(noBtn);
      document.querySelectorAll('.corner-flower').forEach(flower => {
        flower.style.animationDuration = '1s';
      });
    } else if (noClicks === 4) {
      document.body.style.animation = 'glitch 0.3s infinite';
      question.textContent = "System Error... Birthday acceptance is mandatory 🎂😂";
      question.style.color = '#f44336';
      startHeartRain();
    } else {
      noBtn.remove(); 
      question.textContent = "Only one choice remains 😈🎉";
      question.style.color = '#e91e63';
      yesBtn.style.animation = 'heartbeat 1s infinite';
    }
  });

  function moveButtonRandomly(button){
    const w = button.offsetWidth, h = button.offsetHeight;
    const x = Math.random() * (window.innerWidth - w - 20);
    const y = Math.random() * (window.innerHeight - h - 20);
    button.style.position='absolute'; 
    button.style.left=`${x}px`; 
    button.style.top=`${y}px`;
    button.style.transform = `rotate(${Math.random() * 20 - 10}deg)`;
  }

  // Heart rain
  function startHeartRain(){
    const spawn=()=>{
      const heart=document.createElement('div'); 
      heart.className='heart-rain';
      const size=12+Math.random()*25; 
      heart.style.width=size+'px'; 
      heart.style.height=size+'px';
      heart.style.left=Math.random()*100+'vw'; 
      heart.style.animationDuration=2+Math.random()*4+'s';
      const colors=['#ff7eb6','#ff3b3b','#ff69b4','#ff1493','#ffd6e9'];
      heart.style.background=colors[Math.floor(Math.random()*colors.length)]; 
      document.body.appendChild(heart);
      setTimeout(()=>heart.remove(),8000);
    };
    for(let i=0;i<50;i++) setTimeout(spawn,i*40); 
    setInterval(spawn,100);
  }

  // Heart click
  heartShell.addEventListener('click', () => {
    noteOpened = !noteOpened;
    note.classList.toggle('open', noteOpened);
    if (noteOpened) {
      burstConfetti(heartShell);
      setTimeout(() => openBigHeart(), 1000);
    }
  });

  // Big heart open/close
  function openBigHeart(){
    document.body.classList.add('blurred');
    bigHeartOverlay.classList.add('active');
    setTimeout(()=>createMagicParticles(window.innerWidth/2, window.innerHeight/2), 500);
  }
  function closeBigHeart(){
    document.body.classList.remove('blurred');
    bigHeartOverlay.classList.remove('active');
  }
  document.getElementById('closeHeart').addEventListener('click', closeBigHeart);
  bigHeartOverlay.addEventListener('click', (e)=>{ if(e.target===bigHeartOverlay) closeBigHeart() });

  // Confetti
  function burstConfetti(elem){
    const rect=elem.getBoundingClientRect();
    const centerX=rect.left+rect.width/2;
    const centerY=rect.top+rect.height/2;
    for(let i=0;i<120;i++){
      confettiPieces.push({
        x:centerX,y:centerY,r:Math.random()*8+3,
        c:`hsl(${Math.random()*360},100%,50%)`,
        vx:(Math.random()-.5)*8, vy:Math.random()*-8-4, a:1, gravity:.1
      });
    }
  }
  function drawConfetti(){
    ctx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height);
    confettiPieces.forEach((p,i)=>{
      p.x+=p.vx; p.y+=p.vy; p.vy+=p.gravity; p.a-=.008;
      ctx.globalAlpha=p.a; ctx.fillStyle=p.c; ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill();
      if(p.a<=0 || p.y>confettiCanvas.height) confettiPieces.splice(i,1);
    });
    requestAnimationFrame(drawConfetti);
  }
  drawConfetti();

  // Keys
  document.addEventListener('keydown',(e)=>{
    if((e.key==='Enter'||e.key===' ') && document.body.contains(yesBtn)) yesBtn.click();
    else if(e.key==='Escape' && bigHeartOverlay.classList.contains('active')) closeBigHeart();
    else if((e.key==='h'||e.key==='H') && heartContainer.style.display!=='none') heartShell.click();
  });

  // Subtle particles on load
  setTimeout(()=>{
    for(let i=0;i<15;i++){
      setTimeout(()=>createMagicParticles(Math.random()*window.innerWidth, Math.random()*window.innerHeight), i*300);
    }
  },1000);
</script>
</body>
</html>

